using UnityEngine;

public class PlayerState_Play_SmallJump : PlayerStateBase_Play
{
    private Vector2 smallJumpScale = new Vector2(1.2f, 0.8f);

    public PlayerState_Play_SmallJump(PlayerStateMachine stateMachine) : base(stateMachine) { }

    public override void Enter()
    {
        //スケール修正
        tf.localScale = smallJumpScale;

        //重力を強化
        rb.gravityScale = 13;
    }

    public override void Update()
    {
        base.Update();

        //Updateが無効化中なら何もしない
        if (!isActiveUpdate)
            return;

        //ポーズ状態なら何もしない
        if (GameStateState_Play.currentPauseState != GameStateState_Play.PauseState.Play)
            return;

        //しゃがみ入力解除でJumpステートに遷移
        if (IM.is_Player_Squat_Release)
            stateMachine.ChangeState(stateMachine.state_Play_Jump);

        //着地でSquatステートに遷移
        else if (isGrounded)
            stateMachine.ChangeState(stateMachine.state_Play_Squat);
    }

    public override void Exit()
    {
        //重力を戻す
        rb.gravityScale = 10;
    }
}
